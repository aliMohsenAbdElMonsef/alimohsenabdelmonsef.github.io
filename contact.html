<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Me</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link rel="stylesheet" href="design.css" />
  </head>
  <body>
    <header>
      <a class="logo" href="index.html">AM</a>
      <nav>
        <a class="in_nave" href="index.html">Home</a>
        <a href="experience.html">Experience</a>
        <a href="achievements.html">Achievements</a>
        <a href="education.html">Education</a>
        <a href="projects.html">Projects</a>
        <a href="#">Contacts</a>
      </nav>
      <button class="theme-toggle">
        <i class="fa-solid fa-moon"></i>
      </button>
      <div class="menu-btn">
        <i class="fa-solid fa-bars"></i>
      </div>
    </header>

    <section class="contact">
      <h2 class="contact_title">Get in Touch</h2>
      <p class="contact_subtitle">
        Feel free to reach out for collaborations or just a friendly hello ðŸ‘‹
      </p>

      <div class="contact_container">
        <form id="contactForm" class="contact_form">
          <div class="form_group">
            <label for="name">Name</label>
            <input
              type="text"
              id="name"
              name="name"
              placeholder="Your Name"
              required
            />
          </div>
          <div class="form_group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Your Email"
              required
            />
          </div>
          <div class="form_group">
            <label for="subject">Subject</label>
            <input
              type="text"
              id="subject"
              name="subject"
              placeholder="Subject"
            />
          </div>
          <div class="form_group">
            <label for="message">Message</label>
            <textarea
              id="message"
              name="message"
              rows="6"
              placeholder="Your Message"
              required
            ></textarea>
          </div>
          <button type="submit" class="contact_btn" id="submitBtn">
            <span id="btnText">Send Message</span>
          </button>
          <div id="statusMessage" class="message"></div>
        </form>

        <div class="contact_info">
          <h3>Contact Info</h3>
          <p>
            <i class="fa-solid fa-envelope"></i> ali.m.abdelmonsef@gmail.com
          </p>
          <p><i class="fa-solid fa-phone"></i> +20 115 323 5803</p>
          <p><i class="fa-solid fa-location-dot"></i> Giza, Egypt</p>

          <div class="social_icons">
            <a href="https://www.linkedin.com/in/ali-mohsen123/"
              ><i class="fab fa-linkedin"></i
            ></a>
            <a href="https://github.com/aliMohsenAbdElMonsef"
              ><i class="fab fa-github"></i
            ></a>
          </div>
        </div>
      </div>
    </section>

    <script src="responsive.js"></script>
    <script>
      const form = document.getElementById("contactForm");
      const statusMessage = document.getElementById("statusMessage");
      const submitBtn = document.getElementById("submitBtn");
      const btnText = document.getElementById("btnText");

      function showMessage(message, type) {
        statusMessage.textContent = message;
        statusMessage.className = `message ${type}`;
        statusMessage.style.display = "block";

        if (type === "success") {
          setTimeout(() => {
            statusMessage.style.display = "none";
          }, 5000);
        }
      }

      function setLoading(loading) {
        submitBtn.disabled = loading;
        if (loading) {
          btnText.textContent = "Sending...";
          showMessage("Sending your message...", "loading");
        } else {
          btnText.textContent = "Send Message";
        }
      }

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const message = form.message.value.trim();

        if (!name || !email || !message) {
          showMessage("Please fill in all required fields.", "error");
          return;
        }

        setLoading(true);

        const formData = new FormData();
        formData.append("name", name);
        formData.append("email", email);
        formData.append(
          "subject",
          form.subject.value.trim() || "Contact Form Submission"
        );
        formData.append("message", message);

        try {
          console.log("Sending form data:", {
            name,
            email,
            subject: form.subject.value.trim() || "Contact Form Submission",
            message,
          });

          const response = await fetch("https://formspree.io/f/mldlqdja", {
            method: "POST",
            body: formData,
            headers: {
              Accept: "application/json",
            },
          });

          console.log("Response status:", response.status);
          console.log("Response headers:", response.headers);

          const result = await response.json();
          console.log("Response data:", result);

          if (response.ok) {
            showMessage(
              "Message sent successfully! I'll get back to you soon.",
              "success"
            );
            form.reset();
          } else {
            console.error("Server responded with error:", result);
            showMessage(
              result.error || "Failed to send message. Please try again.",
              "error"
            );
          }
        } catch (error) {
          console.error("Network error:", error);
          showMessage(
            "Network error. Please check your connection and try again.",
            "error"
          );
        } finally {
          setLoading(false);
        }
      });

      document
        .querySelectorAll(".form_group input, .form_group textarea")
        .forEach((input) => {
          input.addEventListener("focus", function () {
            this.parentElement.style.transform = "scale(1.02)";
          });

          input.addEventListener("blur", function () {
            this.parentElement.style.transform = "scale(1)";
          });
        });
    </script>
  </body>
</html>

